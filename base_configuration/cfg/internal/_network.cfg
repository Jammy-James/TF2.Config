// --------------------------------------------------------------------------------------------------------------- //
//                                                   Contact Me:                                                   //
//                                            https://github.com/JAH94/                                            //
// --------------------------------------------------------------------------------------------------------------- //
//                                                Network Config.                                                  //
// --------------------------------------------------------------------------------------------------------------- //

// NET SETTINGS
net_queued_packet_thread 1 // 581304
net_maxpacketdrop 1000
net_splitrate 2 // 1
cl_pred_optimize 2
cl_lagcompensation 1
cl_predictweapons 1
cl_smooth 0 // 1
cl_smoothtime 0.1
hud_escort_interp 0.1
cl_timeout 9999

// --------------------------------------------------------------------------------------------------------------- //
// SNAPSHOTS
// Tuning client-server communication and interpolation.
// --------------------------------------------------------------------------------------------------------------- //
alias interp_congestion_unreliable "cl_interp 0.1"
alias interp_congestion_safe       "cl_interp 0.0666666"
alias interp_congestion_balanced   "cl_interp 0.0478260"
alias interp_congestion_lan        "cl_interp 0.0333333"

alias interp_standard_unreliable "cl_interp 0.0454545"
alias interp_standard_safe       "cl_interp 0.0303030"
alias interp_standard_balanced   "cl_interp 0.0217391"
alias interp_standard_lan        "cl_interp 0.015151"

alias packet_rate_congestion_aliases "alias interp_unreliable interp_congestion_unreliable; alias interp_safe interp_congestion_safe; alias interp_balanced interp_congestion_balanced; alias interp_lan interp_congestion_lan"
alias packet_rate_standard_aliases   "alias interp_unreliable interp_standard_unreliable; alias interp_safe interp_standard_safe; alias interp_balanced interp_standard_balanced; alias interp_lan interp_standard_lan"

alias packet_rate_congestion "cl_cmdrate 33; cl_updaterate 32; packet_rate_congestion_aliases"
alias packet_rate_standard   "cl_cmdrate 66; cl_updaterate 66; packet_rate_standard_aliases"

alias toggle_packet_rate packet_rate_standard
PACKET_RATE

alias snapshots_unreliable "interp_unreliable; cl_interp_ratio 3"
alias snapshots_safe       "interp_safe; cl_interp_ratio 2"
alias snapshots_balanced   "interp_balanced; cl_interp_ratio 1.4347827"
alias snapshots_lan        "interp_lan; cl_interp_ratio 1"
alias toggle_snapshots snapshots_balanced
SNAPSHOTS

// --------------------------------------------------------------------------------------------------------------- //
// PACKET SIZE
// How big packets are and how they are split up/compressed.
// --------------------------------------------------------------------------------------------------------------- //
alias packet_size_conservative "net_compresspackets 1; net_compresspackets_minsize 957; net_maxroutable 956; net_maxfragments 956"
alias packet_size_lowend       "net_compresspackets 1; net_compresspackets_minsize 1261; net_maxroutable 1260; net_maxfragments 1260"
alias packet_size_minimal      "net_compresspackets 1; net_compresspackets_minsize 577; net_maxroutable 1260; net_maxfragments 1260"
alias packet_size_balanced     "net_compresspackets 1; net_compresspackets_minsize 957; net_maxroutable 1200; net_maxfragments 1200"
alias packet_size_large        "net_compresspackets 0; net_maxroutable 1260; net_maxfragments 1260"
alias toggle_packet_size packet_size_balanced
PACKET_SIZE

// --------------------------------------------------------------------------------------------------------------- //
// UPLOAD RATE
// Speed of packet sending, rate limited to prevent packet overflow.
// --------------------------------------------------------------------------------------------------------------- //
rate 196608 // 1048576
net_splitpacket_maxrate 78643
net_maxcleartime 0.0081889

// --------------------------------------------------------------------------------------------------------------- //
// FILES
// Controls networked file handling.
// --------------------------------------------------------------------------------------------------------------- //
net_maxfilesize 64
cl_downloadfilter all
tf_steam_workshop_query_timeout 5

alias download_all      "cl_downloadfilter all"
alias download_nosounds "cl_downloadfilter nosounds"
alias download_mapsonly "cl_downloadfilter mapsonly"
alias download_none     "cl_downloadfilter none"
alias toggle_download download_all
DOWNLOAD_FILES

// --------------------------------------------------------------------------------------------------------------- //
// MATCHMAKING
// Adjusts casual/competitive matchmaking setting.
// --------------------------------------------------------------------------------------------------------------- //
tf_mm_debug_level 0
tf_party_join_request_mode 1
tf_mm_custom_ping 350 // Custom ping tolerance in the matchmaking system.
                      // See also tf_custom_ping_enabled.
tf_mm_custom_ping_enabled 0 // Whether to use a custom ping tolerance when matchmaking

// --------------------------------------------------------------------------------------------------------------- //
// LOCAL SERVERS
// Optimises local server networking.
// --------------------------------------------------------------------------------------------------------------- //
cl_localnetworkbackdoor 1
net_usesocketsforloopback 0
sv_parallel_sendsnapshot 1

// --------------------------------------------------------------------------------------------------------------- //
// Protection against server_can_execute bypass.
// Make your cfg/config.cfg read-only for extra protection.
// --------------------------------------------------------------------------------------------------------------- //
//cl_allowupload 0
//alias cl_allowupload
//alias clear
//alias unbindall

// --------------------------------------------------------------------------------------------------------------- //
// Adblock for motd, extra protection:
// > Create an empty file in your tf directory named textwindow_temp.html and make it read-only (this prevents the motd from being saved & loaded).
// > Add '127.0.0.1 motd.pinion.gg' to your hosts file. This prevents a well known motd advertising network from loading.
// --------------------------------------------------------------------------------------------------------------- //
cl_disablehtmlmotd 1
alias closed_htmlpage

// Gets rid of servers playing annoying sound files.
alias play
alias sndplaydelay
alias playgamesound
alias soundfade

// Servers don't need this.
alias cl_spec_mode
alias rpt_connect
alias r_screenoverlay